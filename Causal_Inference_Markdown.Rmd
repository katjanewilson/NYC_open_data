---
title: "Causal Inference Project Proposal"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Overview of Data

All Data is from the NYC Open Data Website

```{r cars, message=FALSE}
######
# STEP 1
#load PS43 and PS 001 data
#######

library(tidyverse)
setwd("/cloud/project/scripts")
PS001_attendance <- read.csv("../data/PS001_attendance.csv")
PS001_demo <- read.csv("../data/PS001_demo.csv")
PS001_class_size <- read.csv("../data/PS001_class_size.csv")

PS043_attendance <- read.csv("../data/PS043_attendance.csv")
PS043_demo <- read.csv("../data/PS043_demo.csv")
PS043_class_size <- read.csv("../data/PS043_class_size.csv")

```

## Just the Bronx

Let's just look at the Bronx to understand how these variables play out.
There are 58 District 75 schools in NYC. I am still working on identifying which schools are D75, but for now, let's focus on PS043, which is definitely D75. X001 (also in the Bronx) does not have a D75 option within it. We want to compare the attendance of Sped students in X001 with attendance of Sped students in X043.

For now, I just compared PSX043 (D75) and PS001 (non D75)

```{r pressure, echo=FALSE}

######
# STEP 2
#some summary differences in schools
#######

##PS 001
PS001_demo %>%
  group_by(schoolyear) %>%
  summarise(DBN, black_per, hispanic_per, white_per)
##PS043
PS043_demo %>%
  group_by(schoolyear) %>%
  summarise(DBN, black_per, hispanic_per, white_per)


```



``` {r}



PS001_class_size %>%
  filter(PROGRAM.TYPE == "SPEC ED" | PROGRAM.TYPE == "GEN ED") %>%
  group_by(SCHOOL.CODE, GRADE, PROGRAM.TYPE) %>%
  summarise(AVERAGE.CLASS.SIZE)
PS043_class_size %>%
  filter(PROGRAM.TYPE == "SPEC ED" | PROGRAM.TYPE == "GEN ED") %>%
  group_by(SCHOOL.CODE, GRADE, PROGRAM.TYPE) %>%
  summarise(AVERAGE.CLASS.SIZE)


#attendance of only the SWD (studens with disabilities)
class(PS001_attendance$X..Days.Absent)
PS001_attendance %>%
  filter(Demographic.Variable == "SWD", Grade==3) %>%
  filter(X..Attendance != 's') %>%
  mutate(days_absent = as.numeric(X..Attendance)) %>%
  group_by(Year) %>%
  mutate(avg_days_absent = mean(days_absent)) %>%
  select(DBN, Grade, Year, avg_days_absent)

PS043_attendance %>%
  filter(Demographic.Variable == "SWD", Grade==3) %>%
  filter(X..Attendance != 's') %>%
  mutate(days_absent = as.numeric(X..Attendance)) %>%
  group_by(Year) %>%
  mutate(avg_days_absent = mean(days_absent)) %>%
  select(DBN, Grade, avg_days_absent)


#attendance of only the SWD (studens with disabilities)
class(PS001_attendance$X..Days.Absent)
PS001_attendance %>%
  filter(Demographic.Variable == "SWD") %>%
  filter(X..Attendance != 's') %>%
  mutate(days_absent = as.numeric(X..Attendance)) %>%
  group_by(Grade) %>%
  summarise(avg_days_absent = mean(days_absent))

PS043_attendance %>%
  filter(Demographic.Variable == "SWD") %>%
  filter(X..Attendance != 's') %>%
  mutate(days_absent = as.numeric(X..Attendance)) %>%
  group_by(Grade) %>%
  summarise(avg_days_absent = mean(days_absent))

```



